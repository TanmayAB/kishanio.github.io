<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>The Library of Ossus : Managing Configuration in Ruby on Rails Application</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">

    </head>
    <body>

        <div class="site">
          <div class="header">
            <h1 class="title"><a href="/">@kishanio</a></h1>
            <a class="extra" href="/">home</a>
          </div>

          <h2>Managing Configuration in Ruby on Rails Application</h2>
<p class="meta">18 Mar 2014</p>

<div class="post">
<p><strong>Motivation</strong></p>

<p>Almost all applications have global variables. Including your API Keys, Enviroment Specific variables etc. Turns out there are multiple ways to set them. Either you can hard-code it or can setup a seperate file and load it form there.</p>

<p><strong>Research</strong></p>

<ol>
<li><a href="http://railscasts.com/episodes/85-yaml-configuration-revised?">Seperate File Inside Application</a> - This is a clean way to do it. But not the best. Reason is you might end up using some library/plugin where you will need to use some of the configuration before hand. For e.g. API key in an Initializer. Or just don&#39;t want your team to see the production config and end up being a <a href="http://thedailywtf.com">story</a>.</li>
<li><a href="http://dotfiles.github.io">DOT files</a> - We have been using this since ages. And seems fair and more secure and more geeky. </li>
</ol>

<p><strong>Usage</strong></p>

<p>There is a <a href="">Gem</a> called <a href="https://github.com/bkeepers/dotenv">dotenv-rails</a> for same. Make sure to load that gem before anyother gems relying on the configuration in Gemfile.</p>

<p>Now you can use <code>.env.&lt;enviroment-specific&gt;</code> file to store your configuration. Even <a href="http://docs.ansible.com/YAMLSyntax.html">YAML</a> like syntax is supported.</p>

<p>For e.g.,</p>

<p>Configuration for development env goes in:</p>

<p>/.env.development</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">ig_client_id=&lt;yourid&gt;
ig_client_secret=&lt;secret&gt;
ig_redirect_url=localhost:4000/callback
</code></pre></div>
<p>And this are available in ENV variable inside your application as follows,</p>

<p>/initializers/instagram.rb </p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="no">Instagram</span><span class="o">.</span><span class="n">configure</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
  <span class="n">config</span><span class="o">.</span><span class="n">client_id</span> <span class="o">=</span> <span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;ig_client_id&#39;</span><span class="o">]</span>
  <span class="n">config</span><span class="o">.</span><span class="n">client_secret</span> <span class="o">=</span> <span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;ig_client_secret&#39;</span><span class="o">]</span>
<span class="k">end</span>

<span class="no">CALLBACK_URL</span> <span class="o">=</span> <span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;ig_redirect_url&#39;</span><span class="o">]</span>
</code></pre></div>


	
<br><hr>
<div id="disqus_thread"></div>
<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'kishanio'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

</div>

    


          <div class="footer">
            <div class="contact">
              <p>
                Emotion, yet peace.<br />
                Ignorance, yet knowledge.<br/>
                Passion, yet serenity.<br/>
                Chaos, yet harmony.<br/>
                Death, yet the Force.<br/>
              </p>
            </div>
            <div class="contact">
              <p>
                Github: <a href="https://github.com/kishanio">kishanio</a><br />
                Twitter: <a href="https://twitter.com/kishanio">@kishanio</a><br />
                Facebook: <a href="https://facebook.com/kishanio">kishanio</a><br />
                IRC: kishanio (freenode)<br/>
                Email: thobhanikishan (at) gmail (dot) com
              </p>
            </div>
          </div>
        </div>
        
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-48962832-1', 'kishanio.github.io');
        ga('send', 'pageview');
    </script>
    </body>
</html>
